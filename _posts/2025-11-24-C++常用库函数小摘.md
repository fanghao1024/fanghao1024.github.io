---
layout: post
title: "C++常用库函数小摘"
description: "摘录C++常用库函数的数据结构和用法，以供日常查阅"
author:     "Hao"
category: true
tagline: " C++"
tags: [C++ , programming ，algorithm]
---

# vector

C++ STL 提供了vector类模板，其对象就是动态数组（或者向量）。如果在插入元素时超过了空间大小会自动分配更大的空间（通常按2倍大小扩容），不会出现上溢出，这就是动态数组的主要优点。

## 定义

```c++
vector＜int＞v1; //定义元素为int类型的向量v1
vector＜int＞v2(10); //指定向量v2的初始大小为10个int元素
vector＜double＞v3(10,1.25); //指定v3的10个初始元素的初值为1.25
vector＜vector＜int＞＞v4; //定义一个元素类型为向量的向量v4
vector＜vector＜int＞＞v5(3,vector＜int＞(5,0)); //定义一个初始化为3行5列且元素为0的二维向量
```

## 主要成员函数

+ capacity（）：返回向量容器所能容纳的元素的个数。
+ resize（n）：调整向量的容器，使其恰好容纳n个元素，增加部分用默认值填充。
+ empty（）：判断向量容器是否为空。
+ size（）：返回向量的长度。
+ [i]：返回向量中下标为i的元素。
+ front（）：返回向量的首元素。
+ back（）：返回向量的尾元素。
+ push_back（）：在向量的尾部添加一个元素。
+ insert（pos，e）：在向量的pos位置插入元素e。
+ erase（）：删除向量中某个迭代器或者迭代器区间指定的元素。
+ clear（）：删除向量中的所有元素。
+ begin（）/end（）：用于正向遍历，返回向量中首元素的位置/尾元素的后一个位置。
+ rbegin（）/rend（）：用于反向遍历，返回向量中尾元素的位置/首元素的前一个位置。

```C++
vector＜int＞a; //定义一个向量(初始为空),即a=[]
a.resize(3); //a=[0,0,0],容量为3,长度为3
a[1]=2; //a=[0,2,0],容量为3,长度为3
a.push_back(3); //a=[0,2,0,3],容量变为6,长度为4
a.insert(a.begin(),1); //a=[1,0,2,0,3],容量为6,长度为5
a.push_back(4); //a=[1,0,2,0,3,4],容量为6,长度为6
for(auto it=a.begin();it!=a.end();it++)
	printf(＂%d＂, * it); //输出:1 0 2 0 3 4
```

# sort排序函数

## 内置数据类型的排序

对于内置数据类型的数据，sort（）默认以less＜T＞（即小于关系函数）作为关系比较函数实现递增排序，为了实现递减排序，需要调用大于关系函数greater＜T＞。

```C++
vector＜int＞v={2,1,5,4,3}; //v={2,1,5,4,3}
sort(v.begin(),v.end(),less＜int＞()); //指定递增排序
sort(v.begin(),v.end()); //不指定less＜int＞时默认递增排序
sort(v.begin(),v.end(),greater＜int＞()); //指定递减排序

//a和b按自定义代码进行比较，如果返回的是true，则a排在b前面；否则a排在b后面
bool cmp(vector<int>& a,vector<int>& b){
    return a<b;
}
sort(a,b,cmp);
```

## 自定义数据类型的排序

对于自定义数据类型（如结构体或者类），同样默认以less＜T＞（即小于关系函数）作为关系比较函数，但需要重载该函数，用户也可以自定义关系函数。在这些重载函数或者关系函数中指定数据的排序顺序（按哪些结构体成员排序，是递增还是递减）。归纳起来，实现排序主要有以下两种方式。

+ 方式1

  在声明结构体类型或者类中重载＜运算符，以实现按指定成员的递增或者递减排序。

  ```C++
  struct Stud{
      int no; //学号
      string name; //姓名
      Stud(int n,string na):no(n),name(na){} //构造函数
      bool operator＜(const Stud&s)const{ //重载比较函数
          return no＜s.no; //用于按no递增排序
      }
  };
  
  int main(){
      Stud a[]={Stud(3,＂Mary＂),Stud(1,＂Smith＂),Stud(2,＂John＂)};
      int n=sizeof(a)/sizeof(a[0]);
      vector＜Stud＞v(a,a+n);
      sort(v.begin(),v.end()); //默认使用＜运算符,按no递增排序
      for(auto it=v.begin();it!=v.end();it++)
      	cout＜＜＂[＂＜＜it-＞no＜＜＂,＂＜＜it-＞name＜＜＂]＂;
      return 0;
  }
  ```

+ 方式2

  在结构体或类中重载函数调用运算符（），以实现按指定成员递增或者递减排序。

  ```C++
  struct Stud{
      int no; //学号
      string name; //姓名
      Stud(int n,string na):no(n),name(na){} //构造函数
  };
  struct Cmp{ //方式2:定义关系函数
      bool operator()(const Stud&s,const Stud&t)const{
      	return s.name＞t.name; //用于按name递减排序
      }
  };
  int main(){
      Stud a[]={Stud(3,＂Mary＂),Stud(1,＂Smith＂),Stud(2,＂John＂)};
      int n=sizeof(a)/sizeof(a[0]);
      vector＜Stud＞v(a,a+n);
      sort(v.begin(),v.end(),Cmp()); //使用Cmp中的()运算符,按name递减排序
      for(auto it=v.begin();it!=v.end();it++)
      	cout＜＜＂[＂＜＜it-＞no＜＜＂,＂＜＜it-＞name＜＜＂]＂;
      return 0;
  }
  ```

  